// ZoomLevel.cpp: implementation of the CZoomLevel class.
//
//////////////////////////////////////////////////////////////////////

//===================================================================================================
//    Arquivo:            ZoomLevel.cpp
//...................................................................................................
//    Descricao:            armazena e gerencia os n�veis de zoom.
//...................................................................................................
//    Autores:            Diogo Hideo Odan
//                        Angelo Passaro
//                        Nancy Mieko Abe
//===================================================================================================


#include <iostream>
#include "zoomlevel.h"


#define DEFAULT_STACK_SIZE  10


CZoomLevel::CZoomLevel()
{ }


CZoomLevel::CZoomLevel(int stacksize):CWWStack(stacksize)
{ }


CZoomLevel::~CZoomLevel()
{ }


//===============================================================================================================================
// Forward
//===============================================================================================================================
// Autor:    Diogo Hideo Odan
// Data:    Dez/2002
// Projeto: Prot�tipo Explorador de Resultados
//===============================================================================================================================
// Descri��o:    - restaura os limites da janela de visualiza��o posteriores. Equivale ao avan�ar o n�vel de zoom.
//===============================================================================================================================
// Par�metros:
//                Entrada:
//                        - nenhum.
//
//                Saida:
//                        - retorna os limites posteriores da janela de visualiza��o.
//===============================================================================================================================
CWorld_Window CZoomLevel::Forward()
{
    CWorld_Window ret;

    if (index >= allocated)
        throw;

    ret = array[++index];

    return ret;
}
//===============================================================================================================================
// Backward
//===============================================================================================================================
// Autor:    Diogo Hideo Odan
// Data:    Dez/2002
// Projeto: Prot�tipo Explorador de Resultados
//===============================================================================================================================
// Descri��o:    - restaura os limites da janela de visualiza��o anteriores. Equivale ao recuar o n�vel de zoom.
//===============================================================================================================================
// Par�metros:
//                Entrada:
//                        - nenhum.
//
//                Saida:
//                        - retorna os limites anteriores da janela de visualiza��o.
//===============================================================================================================================
CWorld_Window CZoomLevel::Backward()
{
    CWorld_Window ret;

    if (index <= 0)
        throw;

    ret = Pop();

    return ret;
}
//===============================================================================================================================
// IsBackOK
//===============================================================================================================================
// Autor:    Diogo Hideo Odan
// Data:    Dez/2002
// Projeto: Prot�tipo Explorador de Resultados
//===============================================================================================================================
// Descri��o:    - verifica se � possivel avan�ar no nivel de zoom.
//===============================================================================================================================
// Par�metros:
//                Entrada:
//                        - nenhum.
//
//                Saida:
//                        - retorna TRUE se for poss�vel avan�ar, caso contr�rio FALSE.
//===============================================================================================================================
bool CZoomLevel::IsBackOK()
{
std::cout << "\nem bool CZoomLevel::IsBackOK(): index =" << index;   std::cout.flush(); 
    return (index > 0);
}
//===============================================================================================================================
// IsFowardOK
//===============================================================================================================================
// Autor:    Diogo Hideo Odan
// Data:    Dez/2002
// Projeto: Prot�tipo Explorador de Resultados
//===============================================================================================================================
// Descri��o:    - verifica se � possivel recuar no nivel de zoom.
//===============================================================================================================================
// Par�metros:
//                Entrada:
//                        - nenhum.
//
//                Saida:
//                        - retorna TRUE se for poss�vel recuar, caso contr�rio FALSE.
//===============================================================================================================================
bool CZoomLevel::IsForwardOK()
{
std::cout << "\nem bool CZoomLevel::IsForwardOK(): index =" << index;   std::cout.flush(); 
    
    return (index < allocated);
}
//===============================================================================================================================
// NewZoom
//===============================================================================================================================
// Autor:    Diogo Hideo Odan
// Data:    Dez/2002
// Projeto: Prot�tipo Explorador de Resultados
//===============================================================================================================================
// Descri��o:    - recebe as informa��es dos limites anteriores ao novo zoom realizado, salvando-os na pilha.
//===============================================================================================================================
// Par�metros:
//                Entrada:
//                        - worldwnd - limites da janela a serem armazenados.
//
//                Saida:
//                        - nenhum.
//===============================================================================================================================
void CZoomLevel::New_Zoom(CWorld_Window worldwnd)
{
    //evita-se que a posi��o em que se encontra armazenado a visualiza��o
    //    original seja sobrescrito.
    if(index == -1)
        index ++;
    Push(worldwnd);

    allocated = index;
}
//===============================================================================================================================
// NewZoom
//===============================================================================================================================
// Autor:    Diogo Hideo Odan
// Data:    Dez/2002
// Projeto: Prot�tipo Explorador de Resultados
//===============================================================================================================================
// Descri��o:    - recebe as informa��es dos limites anteriores ao novo zoom realizado, salvando-os na pilha.
//===============================================================================================================================
// Par�metros:
//                Entrada:
//                        - nenhum.
//
//                Saida:
//                        - nenhum.
//===============================================================================================================================
void CZoomLevel::Reset_Zoom_Index()
{
    index = -1;
}

//===============================================================================================================================
// SetOriginalZoomLevel
//===============================================================================================================================
// Autor:    Nancy Mieko Abe
// Data:    maio/2005
// Projeto: SDK do LEVSOFT
//=============================================================================
// Descricao:    - armazena os limites na primeira posicao da pilha
//
//=============================================================================
// Parametros:
//                Entrada:
//                        - nenhum.
//
//                Saida:
//                        - nenhum.
//=============================================================================
void CZoomLevel::SetOriginalZoomLevel(CWorld_Window worldwnd)
{
    if(index == -1)
        index ++;
    array[0] = worldwnd;
}
